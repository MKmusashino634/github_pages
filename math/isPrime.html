<!-- Generated by Bing AI -->
<!-- prompt:
「テキストボックスから入力して、
オイラー函数の結果を出力するHTMLコードを書いて」
其の後、
「もっと効率化して」
其の後、手直しした。
-->
<!DOCTYPE html>
<html lang="ja">
<head>
	<!--
		head参照
		「http://www.yamamo10.jp/yamamoto/internet/WEB/MathJax/index.php」
	-->
	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({TeX:{equationNumbers:{autoNumber:"AMS"}}});
	</script>
	<script type="text/javascript" async
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML,/www_func/MathJax/MyConfig.js">
	</script>
	<style>
		#result2 {
			width: 90%;
			height: auto;
			overflow: scroll;
			white-space: nowrap;
			background: yellowgreen;
		}
	</style>
</head>
<body>

<h2>素数判定</h2>

<p>
	エラトステネスのふるい
</p>

<input id="isPrime?" type="text">
<button onclick="determinePrime()">確認</button>
<p id="result2"></p>



<script>
	var MAX_SIZE = 1000001;
	var isprime = new Array(MAX_SIZE).fill(true);
	var prime = new Array(MAX_SIZE);
	var SPF = new Array(MAX_SIZE);	//SPF[n]は数値nの最小の素因数;Smallest Prime Factor

	var X = generatePrimes(MAX_SIZE);

	function generatePrimes(MAX_SIZE) {
		var isprime = new Array(MAX_SIZE + 1).fill(true);
		var prime = [];

		isprime[0] = isprime[1] = false;

		for (let i = 2; i <= Math.sqrt(MAX_SIZE); i++) {
			if (isprime[i]) {
				for (let j = i * i; j <= MAX_SIZE; j += i) {
					isprime[j] = false;
				}
			}
		}
		for (let i = 2; i <= MAX_SIZE; i++) {
			if (isprime[i]) {
				prime.push(i);
			}
		}
		return prime;
	}

	// event handler
	function determinePrime() {
		var num = document.getElementById("isPrime?").value;
		var result = isprime[num];
		document.getElementById("result2").innerHTML = result + `<br>` + X;
	}
</script>

</body>
</html>

